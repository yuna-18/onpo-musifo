import{r as t,U as c,j as o,L as W,$ as q}from"./app-Cb8SnxiB.js";import{H as J}from"./Header-8labO_yt.js";import{S as K}from"./Stack-DbICIQ2W.js";import{c as Q,V as N,n as Y,o as Z,B as z}from"./Button-BSJ2urlh.js";import{u as ee}from"./useDecorators-D4LujCPC.js";import"./styled-components.browser.esm-Cvc1yx7v.js";import"./index-CaZsXZEx.js";const D=(a,e)=>{let s=null;return function(...u){s!==null&&clearTimeout(s),s=setTimeout(()=>{a(...u)},e)}},C=a=>{const e=typeof a=="number"||typeof a=="string"?`${a}`:Array.isArray(a)?a.join(","):"",s=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;return e.length-(e.match(s)||[]).length},te={beforeMaxLettersCount:"あと",afterMaxLettersCount:"文字",afterMaxLettersCountExceeded:"オーバー",beforeScreenReaderMaxLettersDescription:"最大",afterScreenReaderMaxLettersDescription:"文字入力できます"},re=Q({slots:{textareaEl:["smarthr-ui-Textarea-textarea","shr-border-shorthand shr-my-[unset] shr-box-border shr-rounded-m shr-bg-white shr-p-0.5 shr-text-base shr-leading-normal shr-text-black shr-opacity-100","contrast-more:shr-border-high-contrast","placeholder:shr-text-grey","focus-visible:shr-focus-indicator","disabled:shr-pointer-events-none disabled:shr-bg-column disabled:shr-text-disabled disabled:placeholder:shr-text-disabled","aria-[invalid]:shr-border-danger"],counter:"smarthr-ui-Textarea-counter shr-block shr-text-sm",counterText:"shr-text-black"},variants:{error:{true:{counterText:"shr-text-danger"}}},defaultVariants:{error:!1}}),I=(a,e=Number.MAX_SAFE_INTEGER)=>{if(!a)return 0;const s=Math.floor(a.scrollHeight/(Y*Number(Z.normal)));return s<e?s:e},ae=t.forwardRef(({autoFocus:a,maxLetters:e,width:s,className:u,autoResize:x=!1,maxRows:f=1/0,rows:b=2,onInput:h,decorators:R,error:E,onChange:m,...g},F)=>{const M=t.useId(),v=`${M}-notice`,S=e?M:void 0,i=t.useRef(null),T=g.defaultValue||g.value,[U,y]=t.useState(b),[d,B]=t.useState(T?C(T):0),[H,V]=t.useState(""),l=ee(te,R),p=t.useCallback(r=>{if(e!==void 0)return r>e?c.createElement(c.Fragment,null,r-e,l.afterMaxLettersCount,l.afterMaxLettersCountExceeded):c.createElement(c.Fragment,null,l.beforeMaxLettersCount,e-r,l.afterMaxLettersCount)},[e,l.afterMaxLettersCountExceeded,l.afterMaxLettersCount,l.beforeMaxLettersCount]),$=t.useMemo(()=>p(d),[d,p]);t.useImperativeHandle(F,()=>i.current);const k=t.useCallback(D(r=>{t.startTransition(()=>{B(C(r))})},200),[]),j=t.useCallback(D(r=>{t.startTransition(()=>{const n=p(C(r));n&&V(n)})},1e3),[p]),A=t.useCallback(r=>{if(e){const n=r.currentTarget.value;k(n),j(n)}m==null||m(r)},[k,e,m,j]);t.useEffect(()=>{a&&i&&i.current&&i.current.focus()},[a]),t.useEffect(()=>{x&&i.current&&y(I(i.current,f))},[y,f,x]);const L=t.useCallback(r=>{if(r.target.rows=b,x){const n=I(r.target,f);r.target.rows=n,y(n)}h==null||h(r)},[x,f,h,b]),{textareaStyleProps:_,counterStyle:O,counterTextStyle:P}=t.useMemo(()=>{const{textareaEl:r,counter:n,counterText:X}=re();return{textareaStyleProps:{className:r({className:u}),style:{width:typeof s=="number"?`${s}px`:s}},counterStyle:n(),counterTextStyle:X({error:!!(e&&e-d<0)})}},[u,d,e,s]),G=t.useMemo(()=>{const r=e&&d>e;return E||r||void 0},[E,e,d]),w=c.createElement("textarea",{...g,..._,...e&&{"aria-describedby":`${v} ${S}`},"data-smarthr-ui-input":"true",onChange:A,ref:i,"aria-invalid":G||void 0,rows:U,onInput:L});return e?c.createElement("span",null,w,c.createElement("span",{className:O},c.createElement("span",{className:P,id:S,"aria-hidden":!0},$)),c.createElement(N,{"aria-live":"polite"},H),c.createElement(N,{id:v},l.beforeScreenReaderMaxLettersDescription,e,l.afterScreenReaderMaxLettersDescription)):w}),se=()=>{const[a,e]=t.useState(!1),s=`javascript:(function(){
    const url = encodeURIComponent(window.location.href);
    const title = encodeURIComponent(document.title);
    const popupUrl = "https://snowtapir22.sakura.ne.jp/otosukui/favorite/create?title=" + title + "&url=" + url;
    window.open(popupUrl, "BookmarkWindow", "width=600,height=500");
  })();`,u=async()=>{try{await navigator.clipboard.writeText(s),e(!0),setTimeout(()=>e(!1),2e3)}catch{alert("コピーに失敗しました")}};return o.jsxs(K,{className:"gap-y-4 max-w-3xl",children:[o.jsxs("ol",{className:"list-decimal pl-6 text-sm leading-relaxed",children:[o.jsxs("li",{children:["以下のコードをコピーして、ブラウザのブックマークバーに貼り付けてください。",o.jsx("br",{}),"通常のブックマークと同様に名前をつけることもできます。(例：お気に入り追加)"]}),o.jsx("li",{children:"クリックすると、開いているページがブックマークとして登録されます。"})]}),o.jsx(ae,{readOnly:!0,value:s,rows:6,className:"font-mono text-xs"}),o.jsx(z,{onClick:u,variant:"primary",className:"h-[44px] bg-[var(--color-primary)] font-bold text-base/[1] border-[var(--color-primary)] text-[var(--color-white)] hover:bg-[var(--color-primary-hover)] hover:border-[var(--color-primary-hover)]",children:a?"コピーしました！":"コードをコピー"})]})},xe=({authUser:a})=>o.jsxs(o.Fragment,{children:[o.jsx(W,{title:"音すくい | お気に入り追加方法"}),o.jsx(J,{authUser:a}),o.jsxs("main",{className:"pt-[148px] px-4 md:px-8 text-[var(--color-text-primary)] max-w-3xl mx-auto",children:[o.jsx("h2",{className:"font-bold text-3xl text-center mb-8",children:"お気に入り登録用ブックマークレット"}),o.jsx(se,{}),o.jsx("div",{className:"mt-12 text-center",children:o.jsx(q,{href:route("facorite"),className:"text-base font-bold underline text-[var(--color-text)] hover:opacity-80",children:"お気に入り一覧に戻る"})})]})]});export{xe as default};
