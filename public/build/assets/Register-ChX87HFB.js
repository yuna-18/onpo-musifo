import{r as t,U as p,m as et,j as m,L as tt}from"./app-Dn_AZamZ.js";import"./index-CwBbuTy7.js";import{H as st}from"./Header-Cb_NRIkm.js";import{c as rt,T as nt}from"./ThemeProvider-BMnG9Xjp.js";import{S as Ee}from"./Stack-D2Z5wMDu.js";import{T as at,g as lt,F as re,I as ce,C as ue}from"./Input-TC0eDdpk.js";import{F as ot,a as it,b as ct,c as te,i as ae,u as ut,d as dt,s as pt,V as ht,L as mt,T as ft,t as de,e as bt,B as gt}from"./Button-BBTF50jd.js";import{u as xt}from"./useDecorators-aEKzmC17.js";import{F as ee,C as ne}from"./Fieldset-Cu_7g51I.js";import{F as yt}from"./AnchorButton-DuTuGF0i.js";import"./styled-components.browser.esm-bt7omeYQ.js";import"./index-FUwZcQZk.js";const vt=ot,wt=ct,_t=it,Ct=te({base:["smarthr-ui-Chip","shr-border-shorthand shr-rounded-full shr-bg-white shr-text-black shr-leading-none","contrast-more:shr-border-high-contrast"],variants:{size:{s:"shr-text-sm shr-px-0.5 shr-py-0.25"},disabled:{true:"shr-bg-white/50 shr-text-disabled"}},defaultVariants:{size:"s"}}),Mt=({size:s,disabled:e,className:n,...a})=>{const d=t.useMemo(()=>Ct({size:s,disabled:e,className:n}),[s,e,n]);return p.createElement("span",{...a,className:d})},kt=te({base:["shr-box-content shr-inline shr-cursor-pointer shr-select-auto shr-appearance-none shr-items-stretch shr-overflow-visible shr-border-none shr-border-current shr-bg-transparent shr-bg-none shr-bg-origin-padding shr-p-0 shr-text-left shr-font-inherit shr-text-inherit shr-text-color-inherit","focus-visible:shr-focus-indicator"]}),Et=t.forwardRef(({className:s,type:e="button",...n},a)=>{const d=t.useMemo(()=>kt({className:s}),[s]);return p.createElement("button",{...n,type:e,ref:a,className:d})});function It(s,e){const n=t.useCallback(a=>{s.some(d=>St(a,d.current))||e(a)},[...s,e]);t.useEffect(()=>(window.addEventListener("click",n),()=>{window.removeEventListener("click",n)}),[n])}function St(s,e){const n=s.composedPath();return n.length===0||!e?!1:n.includes(e)}function Ie(s){return s.replace(/\s/g," ").replace(/’/g,"'").replace(/[”“]/g,'"').replace(/｀/g,"`").replace(/￥/g,"¥").replace(/−/g,"-").replace(/〜/g,"~").replace(/[！-｝]/g,e=>String.fromCharCode(e.charCodeAt(0)-65248)).toLowerCase()}function pe(s,e){return s.value===e.value&&ae(s.label)===ae(e.label)}function Bt(s){const e=t.useMemo(()=>Array.from({length:s}).map(()=>t.createRef()),[s]),n=t.useRef(null),[a,d]=t.useState(null),f=t.useCallback(()=>{var _,u,w;if(s!==0)if(a===null){if(((_=n.current)==null?void 0:_.selectionStart)===0){const i=e.length-1;(u=e[i].current)==null||u.focus(),d(i)}}else{const i=Math.max(a-1,0);(w=e[i].current)==null||w.focus(),d(i)}},[e,a,s]),x=t.useCallback(()=>{var _;if(e.length!==0&&a!==null){const u=a+1;u<e.length?((_=e[u].current)==null||_.focus(),d(u)):(d(null),setTimeout(()=>{var w;(w=n.current)==null||w.focus()}))}},[e,a]),b=t.useCallback(()=>{d(null)},[]);return{deletionButtonRefs:e,inputRef:n,focusPrevDeletionButton:f,focusNextDeletionButton:x,resetDeletionButtonFocus:b}}const Te=te({base:["shr-block shr-min-w-full shr-cursor-pointer shr-border-none shr-px-1 shr-py-0.5 shr-text-left shr-text-base shr-leading-tight","aria-selected:shr-text-white","disabled:shr-cursor-not-allowed disabled:shr-text-disabled","data-[active=true]:shr-bg-white-darken data-[active=true]:aria-selected:shr-bg-main-darken","data-[active=false]:shr-bg-white data-[active=false]:aria-selected:shr-bg-main"],variants:{new:{true:"smarthr-ui-ComboBox-addButton shr-flex shr-items-center",false:"smarthr-ui-ComboBox-selectButton"}}}),Lt=({option:s,onAdd:e,onSelect:n,onMouseOver:a,activeRef:d})=>{const f=t.useCallback(()=>{a(s)},[a,s]),x={option:s,onMouseOver:f,activeRef:d};return s.isNew?p.createElement(Pt,{...x,onAdd:e}):p.createElement(Rt,{...x,onSelect:n})},Nt=p.memo,Tt=Nt(Lt),Pt=({activeRef:s,option:e,onAdd:n,onMouseOver:a})=>{const d=t.useMemo(()=>Te({new:!0}),[]),f=t.useMemo(()=>n?()=>{n(e)}:void 0,[e,n]);return p.createElement("button",{ref:s,type:"button",role:"option","aria-selected":!1,id:e.id,"data-active":!!s,onClick:f,onMouseOver:a,className:d},p.createElement(wt,{color:"TEXT_LINK",text:p.createElement(at,{color:"TEXT_LINK"},"「",e.item.label,"」を追加")}))},Rt=({activeRef:s,option:e,onSelect:n,onMouseOver:a})=>{const d=t.useMemo(()=>Te({new:!1}),[]),f=t.useCallback(()=>{n(e)},[n,e]);return p.createElement("button",{ref:s,type:"button",role:"option",id:e.id,disabled:e.item.disabled,"aria-selected":e.selected,"data-active":!!s,onClick:f,onMouseOver:a,className:d},e.item.label)};function jt({options:s}){const[e,n]=t.useState(null);t.useEffect(()=>{n(x=>x===null?null:s.find(b=>x.id===b.id)??null)},[s]);const a=t.useCallback((x,b)=>{if(s.every(i=>i.item.disabled))return;const _=x===null?-1:s.findIndex(i=>i.id===x.id),u=_===-1?b===1?0:s.length-1:(_+b+s.length)%s.length,w=s[u];w&&(w.item.disabled?a(w,b):n(w))},[s]),d=t.useCallback(()=>{a(e,1)},[e,a]),f=t.useCallback(()=>{a(e,-1)},[e,a]);return{activeOption:e,setActiveOption:n,moveActivePositionDown:d,moveActivePositionUp:f}}const Se=100,Ot=()=>null;function At({items:s,minLength:e=0}){const n=t.useCallback(b=>Math.max(b,e),[e]),[a,d]=t.useState(n(Se));t.useEffect(()=>{d(b=>n(b))},[n]);const f=t.useMemo(()=>s.slice(0,a),[a,s]),x=t.useCallback(()=>p.createElement(Ft,{onIntersect:()=>{d(b=>n(b+Se))}}),[n]);return{items:f,renderIntersection:a>=s.length?Ot:x}}const Ft=({onIntersect:s})=>{const e=t.useRef(null);return t.useEffect(()=>{const n=e.current;if(n===null)return;const a=new IntersectionObserver(([d])=>{d.isIntersecting&&s()});return a.observe(n),()=>a.disconnect()},[s]),p.createElement("div",{ref:e})},$t={noResultText:"一致する選択肢がありません",loadingText:"処理中"},Wt=/^(Arrow)?Down$/,Ut=/^(Arrow)?Up/,Dt=te({slots:{wrapper:"shr-absolute",dropdownList:["smarthr-ui-ComboBox-dropdownList","shr-absolute shr-z-overlap shr-box-border shr-min-w-full shr-overflow-y-auto shr-rounded-m shr-bg-white shr-py-0.5 shr-shadow-layer-3","shr-max-h-[calc((theme(fontSize.base)_+_theme(spacing[0.5])_*_2)_*_7.5_+_theme(spacing[0.5]))]","aria-hidden:shr-hidden"],helpMessage:"shr-whitespace-[initial] shr-border-b-shorthand shr-mx-0.5 shr-mb-0.5 shr-mt-0 shr-px-0.5 shr-pb-0.5 shr-pt-0 shr-text-sm",loaderWrapper:"shr-flex shr-items-center shr-justify-center shr-p-1",noItems:"smarthr-ui-ComboBox-noItems shr-my-0 shr-bg-white shr-px-1 shr-py-0.5 shr-text-base"}}),Kt=({options:s,dropdownHelpMessage:e,dropdownWidth:n,onAdd:a,onSelect:d,isExpanded:f,isLoading:x,triggerRef:b,decorators:_})=>{const[u,w]=t.useState("pointer"),{activeOption:i,setActiveOption:g,moveActivePositionDown:K,moveActivePositionUp:O}=jt({options:s});t.useEffect(()=>{f||g(null)},[f,g]);const y=t.useRef(null),[S,A]=t.useState({top:0,left:0}),[N,L]=t.useState(0);t.useEffect(()=>{if(!b.current)return;const c=b.current.getBoundingClientRect();L(c.width)},[f,b]);const C=t.useCallback(()=>{if(!y.current||!b.current)return;const c=b.current.getBoundingClientRect(),M=window.innerHeight-c.bottom,E=c.top,r=Math.min(y.current.scrollHeight,parseInt(getComputedStyle(y.current).maxHeight,10)),o=2;let h=0,k;M>=r?h=c.top+c.height-o+window.pageYOffset:E>=r?h=c.top-r+o+window.pageYOffset:E>M?(h=c.top-E+o+window.pageYOffset,k=E):(h=c.top+c.height-o+window.pageYOffset,k=M),A({top:h,left:c.left+window.pageXOffset,height:k}),L(c.width)},[y,b]),T=t.useRef(null);t.useEffect(()=>{if(!T.current||!y.current||i===null||u!=="key")return;const c=T.current.getBoundingClientRect(),M=y.current.getBoundingClientRect();c.top<M.top?y.current.scrollTop-=M.top-c.top:c.bottom>M.bottom&&(y.current.scrollTop+=c.bottom-M.bottom)},[i,y,u]),ut(()=>{f&&C()},[C,f,s]);const F=t.useCallback(c=>{if(w("key"),Wt.test(c.key))c.stopPropagation(),K();else if(Ut.test(c.key))c.stopPropagation(),O();else if(c.key==="Enter"){if(i===null)return;c.stopPropagation(),i.isNew?a&&a(i.item.value):d(i.item)}else g(null)},[i,K,O,a,d,g]),{createPortal:$}=dt(),P=t.useId(),{items:B,renderIntersection:Y}=At({items:s,minLength:t.useMemo(()=>(i===null?0:s.indexOf(i))+1,[i,s])}),H=t.useMemo(()=>a?c=>{requestAnimationFrame(()=>{a(c.item.value)})}:void 0,[a]),z=t.useCallback(c=>{d(c.item)},[d]),G=t.useCallback(c=>{w("pointer"),g(c)},[g]),W=t.useMemo(()=>{const{top:c,left:M}=S;return{top:`${c}px`,left:`${M}px`,width:`${N}px`}},[S,N]),v=t.useMemo(()=>{const{left:c,height:M}=S,E=n||N;return{width:typeof E=="string"?E:`${E}px`,maxWidth:`calc(100vw - ${c}px - ${pt[.5]})`,height:M?`${M}px`:void 0}},[S,N,n]),R=t.useMemo(()=>{const{wrapper:c,dropdownList:M,helpMessage:E,loaderWrapper:r,noItems:o}=Dt();return{wrapper:c(),dropdownList:M(),helpMessage:E(),loaderWrapper:r(),noItems:o()}},[]),X=xt($t,_);return{renderListBox:t.useCallback(()=>$(p.createElement("div",{className:R.wrapper,style:W},f&&x&&p.createElement(ht,{role:"status"},X.loadingText),p.createElement("div",{id:P,ref:y,role:"listbox","aria-hidden":!f,className:R.dropdownList,style:v},e&&p.createElement("p",{className:R.helpMessage},p.createElement(vt,{color:"TEXT_GREY",text:e,iconGap:.25})),f?x?p.createElement("div",{className:R.loaderWrapper},p.createElement(mt,{"aria-hidden":!0})):s.length===0?p.createElement("p",{role:"alert","aria-live":"polite",className:R.noItems},X.noResultText):B.map(c=>p.createElement(Tt,{key:c.id,option:c,onAdd:H,onSelect:z,onMouseOver:G,activeRef:c.id===(i==null?void 0:i.id)?T:void 0})):null,Y()))),[i==null?void 0:i.id,Y,B,s.length,f,x,e,P,X,H,G,z,R,v,W,$]),activeOption:i,handleKeyDown:F,listBoxId:P,listBoxRef:y}},Xt=(s,e)=>e.some(n=>pe(n,s)),qt=({selected:s,isItemSelected:e=Xt,...n})=>{const a=t.useCallback(d=>e(d,s),[s,e]);return Ht(n,a)};function Ht({items:s,creatable:e,inputValue:n="",isFilteringDisabled:a=!1},d){const f=t.useId(),x=t.useId(),b=t.useMemo(()=>s.map((i,g)=>({id:`${x}-${g}`,selected:d(i),isNew:!1,item:i})),[d,s,x]),_=t.useMemo(()=>e&&n&&s.every(i=>i.label!==n)?{id:f,isNew:!0,selected:!1,item:{label:n,value:n}}:null,[n,s,e,f]),u=t.useMemo(()=>_?[_,...b]:b,[b,_]);return{options:t.useMemo(()=>a||!n?u:u.filter(({item:{label:i}})=>Ie(ae(i)).includes(Ie(n))),[u,n,a])}}const Yt=({needsTooltip:s,text:e,children:n})=>s?p.createElement(ft,{message:e,multiLine:!0},n):p.createElement(p.Fragment,null,n),Be="削除",zt=te({slots:{wrapper:"smarthr-ui-MultiComboBox-selectedItem shr-flex shr-items-center shr-gap-0.75 shr-leading-normal [&]:shr-rounded-em",itemLabel:"smarthr-ui-MultiComboBox-selectedItemLabel",deleteButton:["smarthr-ui-MultiComboBox-deleteButton","shr-group/deleteButton","shr-shrink shr-rounded-full shr-leading-[0] shr-text-black","focus-visible:shr-shadow-[unset]"],deleteButtonIcon:"group-focus-visible/deleteButton:shr-focus-indicator group-focus-visible/deleteButton:shr-rounded-full"},variants:{enableEllipsis:{true:{itemLabel:"shr-overflow-hidden shr-overflow-ellipsis shr-whitespace-nowrap"}},disabled:{true:{deleteButton:"shr-cursor-not-allowed"},false:{}}}});function Gt({item:s,disabled:e,onDelete:n,enableEllipsis:a,buttonRef:d,decorators:f}){var L;const x=t.useRef(null),[b,_]=t.useState(!1),{deletable:u=!0}=s,w=t.useCallback(()=>{n&&n(s)},[s,n]);t.useEffect(()=>{const C=x.current;!C||!a||C.offsetWidth<C.scrollWidth&&_(!0)},[a]);const{wrapper:i,itemLabel:g,deleteButton:K,deleteButtonIcon:O}=zt(),{wrapperStyle:y,itemLabelStyle:S,deleteButtonStyle:A,deleteButtonIconStyle:N}=t.useMemo(()=>({wrapperStyle:i(),itemLabelStyle:g({enableEllipsis:a}),deleteButtonStyle:K({disabled:e}),deleteButtonIconStyle:O()}),[K,O,e,a,g,i]);return p.createElement(Yt,{needsTooltip:b,text:s.label},p.createElement(Mt,{disabled:e,className:y},p.createElement("span",{className:S,ref:x},s.label),u&&p.createElement(Et,{className:A,disabled:e,onClick:w,onKeyDown:C=>{(C.key==="Enter"||C.key==="Backspace"||C.key===" ")&&(C.stopPropagation(),w())},ref:d,tabIndex:-1},p.createElement(_t,{color:e?"TEXT_DISABLED":"inherit",alt:((L=f==null?void 0:f.destroyButtonIconAlt)==null?void 0:L.call(f,Be))||Be,className:N}))))}function Pe(s,e){return s?s.classList.contains(e)||Pe(s.parentElement,e):!1}const Le="選択済みアイテム",Jt=te({slots:{wrapper:["smarthr-ui-MultiComboBox","shr-box-border shr-inline-flex shr-min-w-[15em] shr-rounded-m shr-border shr-border-solid shr-px-0.5 shr-py-0.25 shr-align-bottom","contrast-more:shr-border-high-contrast","has-[[aria-invalid]]:shr-border-danger"],inputArea:"shr-flex shr-flex-1 shr-flex-wrap shr-gap-0.5 shr-overflow-y-auto",selectedList:"smarthr-ui-MultiComboBox-selectedList shr-contents shr-list-none [&_li]:shr-min-w-0",inputWrapper:"shr-flex shr-flex-1 shr-items-center",input:["smarthr-ui-MultiComboBox-input","shr-w-full shr-min-w-[5em] shr-border-none shr-text-base shr-text-black shr-outline-none shr-outline-0","disabled:shr-hidden"],placeholderEl:"smarthr-ui-MultiComboBox-placeholder shr-my-0 shr-self-center",suffixWrapper:["shr-relative -shr-me-0.5 shr-ms-0.5 shr-p-0.5",'before:shr-absolute before:shr-inset-x-0 before:shr-inset-y-0.25 before:shr-w-0 before:shr-border-0 before:shr-border-l before:shr-border-solid before:shr-border-default before:shr-content-[""]'],suffixIcon:"shr-block"},variants:{focused:{true:{wrapper:"shr-focus-indicator"}},disabled:{true:{wrapper:"shr-cursor-not-allowed shr-border-default/50 shr-bg-white-darken shr-text-disabled"},false:{wrapper:"shr-cursor-text shr-bg-white"}},hidden:{true:{inputWrapper:"shr-pointer-events-none shr-absolute shr-opacity-0"}}},compoundVariants:[{disabled:!1,className:{wrapper:"shr-border-default"}}]}),Qt=({items:s,selectedItems:e,name:n,disabled:a=!1,required:d=!1,error:f=!1,creatable:x=!1,placeholder:b="",autoComplete:_,dropdownHelpMessage:u,isLoading:w,selectedItemEllipsis:i,width:g,dropdownWidth:K="auto",inputValue:O,className:y,onChange:S,onChangeInput:A,onAdd:N,onDelete:L,onSelect:C,onChangeSelected:T,onFocus:F,onBlur:$,onKeyPress:P,decorators:B,isItemSelected:Y,style:H,...z},G)=>{var Me;const W=t.useRef(null),[v,R]=t.useState(!1),[X,se]=t.useState(!1),c=t.useMemo(()=>O!==void 0,[O]),[M,E]=t.useState(""),r=c?O:M,[o,h]=t.useState(!1),{options:k}=qt({items:s,selected:e,creatable:x,inputValue:r,isItemSelected:Y}),j=t.useCallback(l=>{c||E(l)},[c]),U=t.useCallback(l=>{requestAnimationFrame(()=>{L&&L(l),T&&T(e.filter(q=>!pe(q,l)))})},[T,L,e]),I=t.useCallback(l=>{requestAnimationFrame(()=>{const q=e.find(ie=>pe(ie,l));q!==void 0?q.deletable!==!1&&U(l):(C&&C(l),T&&T(e.concat(l)))})},[U,T,C,e]),{renderListBox:J,activeOption:Q,handleKeyDown:V,listBoxId:Re,listBoxRef:je}=Kt({options:k,dropdownHelpMessage:u,dropdownWidth:K,onAdd:N,onSelect:I,isExpanded:v,isLoading:w,triggerRef:W,decorators:B}),{deletionButtonRefs:Oe,inputRef:D,focusPrevDeletionButton:he,focusNextDeletionButton:me,resetDeletionButtonFocus:Z}=Bt(e.length);t.useImperativeHandle(G,()=>D.current);const le=t.useCallback(()=>{F&&F(),R(!0)},[F]),oe=t.useCallback(()=>{v&&($&&$(),R(!1),Z())},[v,$,Z]),Ae=t.useMemo(()=>v?de.black:a?de.disabled:de.grey,[a,v]);It([W,je],oe),t.useEffect(()=>{var l;X?(se(!1),(l=D.current)==null||l.select()):j("")},[e,D,j]),t.useEffect(()=>{v&&D.current&&D.current.focus()},[D,v,j,e]);const Fe=t.useCallback(l=>{var q,ie;if(!o){if(l.key==="Escape"||l.key==="Esc")l.stopPropagation(),oe();else if(l.key==="Tab")v&&((q=D.current)==null||q.focus()),oe();else if(l.key==="Left"||l.key==="ArrowLeft")l.stopPropagation(),he();else if(l.key==="Right"||l.key==="ArrowRight")l.stopPropagation(),me();else if(l.key==="Backspace"&&!r&&e.length>0&&e[e.length-1].deletable!==!1){l.preventDefault(),l.stopPropagation();const ke=e[e.length-1];U(ke),se(!0),j(ae(ke.label))}else l.stopPropagation(),(ie=D.current)==null||ie.focus(),Z();V(l)}},[oe,me,he,V,D,o,v,Z,U,r,e,j]),$e=t.useCallback(l=>{!Pe(l.target,"smarthr-ui-MultiComboBox-deleteButton")&&!a&&!v&&le()},[v,a,le]),We=t.useCallback(l=>{S&&S(l),A&&A(l),j(l.currentTarget.value)},[S,A,j]),Ue=t.useCallback(()=>{Z(),v||le()},[v,le,Z]),De=t.useCallback(()=>h(!0),[]),Ke=t.useCallback(()=>h(!1),[]),Xe=t.useCallback(l=>{(l.key==="Down"||l.key==="ArrowDown"||l.key==="Up"||l.key==="ArrowUp")&&l.preventDefault()},[]),qe=t.useCallback(l=>{l.key==="Enter"&&l.preventDefault(),P&&P(l)},[P]),fe=t.useId(),{wrapper:be,inputArea:ge,selectedList:xe,inputWrapper:ye,input:ve,placeholderEl:we,suffixWrapper:_e,suffixIcon:Ce}=Jt(),{wrapperStyleProps:He,inputAreaStyle:Ye,selectedListStyle:ze,inputWrapperStyle:Ge,inputStyle:Je,placeholderStyle:Qe,suffixWrapperStyle:Ve,suffixIconStyle:Ze}=t.useMemo(()=>{const l=typeof g=="number"?`${g}px`:g;return{wrapperStyleProps:{style:{...H,width:l},className:be({focused:v,disabled:a,className:y})},inputAreaStyle:ge(),selectedListStyle:xe(),inputWrapperStyle:ye({hidden:!v}),inputStyle:ve(),placeholderStyle:we(),suffixWrapperStyle:_e({disabled:a}),suffixIconStyle:Ce()}},[y,a,ve,ge,ye,v,we,xe,H,Ce,_e,g,be]);return p.createElement("div",{...He,ref:W,onClick:$e,onKeyDown:Fe,onKeyPress:qe,role:"group"},p.createElement("div",{className:Ye},p.createElement("ul",{id:fe,"aria-label":((Me=B==null?void 0:B.selectedListAriaLabel)==null?void 0:Me.call(B,Le))||Le,className:ze},e.map((l,q)=>p.createElement("li",{key:`${l.label}-${ae(l.value)}`},p.createElement(Gt,{item:l,disabled:a,onDelete:U,enableEllipsis:i,buttonRef:Oe[q],decorators:B})))),p.createElement("div",{className:Ge},p.createElement("input",{...z,"data-smarthr-ui-input":"true",type:"text",name:n,value:r,disabled:a,required:d&&e.length===0,ref:D,onChange:We,onFocus:Ue,onCompositionStart:De,onCompositionEnd:Ke,onKeyDown:Xe,autoComplete:_??"off",tabIndex:0,role:"combobox","aria-activedescendant":Q==null?void 0:Q.id,"aria-controls":`${Re} ${fe}`,"aria-haspopup":"listbox","aria-expanded":v,"aria-invalid":f||void 0,"aria-disabled":a,"aria-autocomplete":"list",className:Je})),e.length===0&&b&&!v&&p.createElement("p",{className:Qe},b)),p.createElement("div",{className:Ve},p.createElement(bt,{color:Ae,className:Ze})),J())},Ne=lt(Qt);function us({authUser:s,areas:e,subareas:n,areaToSubarea:a,musicCategories:d,musicInstCategories:f,musicInsts:x,musicCategoryToInstCategoryMap:b,instCategoryToInstruments:_,formData:u={}}){const w=rt(),{data:i,setData:g,post:K,processing:O,errors:y}=et({name:u.name??"",furigana:u.furigana??"",email:u.email??"",password:u.password??"",area_ids:u.area_ids??[],subarea_ids:u.subarea_ids??[],music_category_ids:u.music_category_ids??[],newsletter_opt_in:Number(u.newsletter_opt_in)??0,email_notify_opt_in:Number(u.email_notify_opt_in)??0,music_inst_category_ids:u.music_inst_category_ids??[],music_inst_ids:u.music_inst_ids??[]}),S=e,A=n,N=d,L=f,C=x,T="/",[F,$]=t.useState([]),[P,B]=t.useState([]),[Y,H]=t.useState([]),[z,G]=t.useState([]),[W,v]=t.useState([]);t.useEffect(()=>{var o,h,k,j,U;const r=(I=[],J=[])=>{const Q=I.map(V=>Number(V));return J.filter(V=>Q.includes(Number(V.value)))};if(((o=u.area_ids)==null?void 0:o.length)>0){const I=r(u.area_ids,S);$(I)}if(((h=u.subarea_ids)==null?void 0:h.length)>0){const I=r(u.subarea_ids,A);G(I)}if(((k=u.music_category_ids)==null?void 0:k.length)>0){const I=r(u.music_category_ids,N);v(I)}if(((j=u.music_inst_category_ids)==null?void 0:j.length)>0){const I=r(u.music_inst_category_ids,L);B(I)}if(((U=u.music_inst_ids)==null?void 0:U.length)>0){const I=r(u.music_inst_ids,C);H(I)}},[u,S,A,N,L,C]);const R=(r,o,h)=>h.filter(k=>r.some(j=>{const U=String(j.value),I=Number(k.value),J=o[U];return Array.isArray(J)?J.includes(I):!1})),X=(r,o)=>r.some(k=>k.value===o.value)?r.filter(k=>k.value!==o.value):[...r,o],se=L.filter(r=>W.some(o=>{var h;return(h=b[o.value])==null?void 0:h.includes(r.value)})),c=R(F,a,A),M=R(P,_,C),E=r=>{K(route("user.register.confirm"),{preserveState:!0,preserveScroll:!0,onError:o=>{},onSuccess:()=>{}})};return m.jsxs(nt,{theme:w,children:[m.jsx(tt,{title:"音すくい | 新規登録"}),m.jsx(st,{authUser:s}),m.jsxs("main",{className:"pt-[148px] text-[var(--color-text-primary)]  bg-[var(--color-background)] select-none",children:[m.jsx("h2",{className:"font-bold text-3xl text-center",children:"ユーザー登録"}),m.jsx("form",{onSubmit:E,children:m.jsxs(Ee,{className:"w-[90vw] md:w-[80vw] lg:w-[60vw] mt-8 mx-auto gap-y-2",children:[m.jsx(re,{autoBindErrorInput:!0,title:"氏名",htmlFor:"name",helpMessage:"スペースなしで入力してください",exampleMessage:"山田太郎",errorMessages:y.name?[y.name]:[],supplementaryMessage:"",statusLabelProps:{children:"必須",type:"red"},children:m.jsx(ce,{id:"name",name:"name",value:i.name,autoComplete:"name",autoFocus:!0,type:"text",required:!0,onChange:r=>g("name",r.target.value),className:"h-[32px]"})}),m.jsx(re,{autoBindErrorInput:!0,title:"フリガナ",htmlFor:"furigana",helpMessage:"カタカナ（スペースなし）で入力してください。",exampleMessage:"ヤマダタロウ",errorMessages:y.furigana?[y.furigana]:[],supplementaryMessage:"",statusLabelProps:{children:"必須",type:"red"},children:m.jsx(ce,{id:"furigana",name:"furigana",value:i.furigana,type:"text",required:!0,onChange:r=>g("furigana",r.target.value),className:"h-[32px]"})}),m.jsx(re,{autoBindErrorInput:!0,title:"メールアドレス",htmlFor:"email",helpMessage:"",exampleMessage:"",errorMessages:y.email?[y.email]:[],supplementaryMessage:"",statusLabelProps:{children:"必須",type:"red"},children:m.jsx(ce,{id:"email",name:"email",value:i.email,autoComplete:"email",type:"email",required:!0,onChange:r=>g("email",r.target.value),className:"h-[32px] w-1/2"})}),m.jsx(re,{autoBindErrorInput:!0,title:"パスワード",htmlFor:"password",helpMessage:"8文字以上で入力してください。",exampleMessage:"",errorMessages:y.password?[y.password]:[],supplementaryMessage:"",statusLabelProps:{children:"必須",type:"red"},children:m.jsx(ce,{id:"password",name:"password",value:i.password,autoComplete:"new-password",type:"password",required:!0,onChange:r=>g("password",r.target.value),className:"h-[32px] w-1/2"})}),m.jsx(re,{title:"都道府県",htmlFor:"area",helpMessage:"地域に合わせた情報をお届けしやすくするために必要です。(複数選択可)",exampleMessage:"",supplementaryMessage:"この項目を選択すると、地域区分の選択肢が表示されます。",statusLabelProps:{children:"任意",type:"grey"},children:m.jsx(Ne,{items:S,name:"area",selectedItems:F,onSelect:r=>{if(!(r!=null&&r.value))return;const o=[...F,r];$(o),g("area_ids",o.map(h=>h.value))},onDelete:r=>{if(!(r!=null&&r.value))return;const o=F.filter(h=>h.value!==r.value);$(o),g("area_ids",o.map(h=>h.value))}})}),m.jsx(ee,{title:"地域区分",exampleMessage:"",helpMessage:"地域に合わせた、より詳細な情報をお届けしやすくするために必要です。(複数選択可)",supplementaryMessage:"都道府県の項目を選択すると、選択肢が表示されます。",statusLabelProps:{children:"任意",type:"grey"},children:m.jsx(ue,{gap:{column:1.25,row:.5},children:c.map(r=>m.jsx(ne,{id:`subarea_${r.value}`,name:`subarea_${r.value}`,checked:z.some(o=>o.value===r.value),onChange:()=>{const o=X(z,r);G(o),g("subarea_ids",o.map(h=>h.value))},children:r.label},r.value))})}),m.jsx(ee,{exampleMessage:"",helpMessage:"検索・メルマガ配信のために利用します。(複数選択可)",supplementaryMessage:"この項目を選択すると、楽器カテゴリの項目が表示されます。",title:"経験・興味のある音楽ジャンル",statusLabelProps:{children:"任意",type:"grey"},children:m.jsx(ue,{gap:{column:1.25,row:.5},children:N.map(r=>m.jsx(ne,{id:`music_category_${r.value}`,name:`music_category_${r.value}`,checked:W.some(o=>o.value===r.value),onChange:()=>{const o={label:r.label,value:r.value},h=X(W,o);v(h),g("music_category_ids",h.map(k=>k.value))},children:r.label},r.value))})}),m.jsx(ee,{exampleMessage:"",helpMessage:"地域に基づいた情報を配信します。",supplementaryMessage:"",title:"メールマガジン",statusLabelProps:{children:"任意",type:"grey"},children:m.jsx(ne,{id:"newsletter_opt_in",name:"newsletter_opt_in",checked:i.newsletter_opt_in===1,onChange:r=>g("newsletter_opt_in",r.target.checked?1:0),children:"受け取る"})}),m.jsx(ee,{exampleMessage:"",helpMessage:"お気に入りしたサイトの情報をメールで希望日時に通知する機能です。",supplementaryMessage:"",title:"メール通知機能",statusLabelProps:{children:"任意",type:"grey"},children:m.jsx(ne,{id:"email_notify_opt_in",name:"email_notify_opt_in",checked:i.email_notify_opt_in===1,onChange:r=>g("email_notify_opt_in",r.target.checked?1:0),children:"利用する"})}),m.jsx(ee,{exampleMessage:"",helpMessage:"楽器の分類を選択してください。(複数選択可)",supplementaryMessage:"音楽ジャンルを選択すると、選択肢が表示されます。",title:"経験・興味のある楽器カテゴリ",statusLabelProps:{children:"任意",type:"grey"},className:"block",children:m.jsx(Ee,{children:m.jsx(Ne,{items:se,name:"music_inst_category",selectedItems:P,onSelect:r=>{if(!(r!=null&&r.value))return;const o=[...P,r];B(o),g("music_inst_category_ids",o.map(h=>h.value))},onDelete:r=>{if(!(r!=null&&r.value))return;const o=P.filter(h=>h.value!==r.value);B(o),g("music_inst_category_ids",o.map(h=>h.value))}})})}),m.jsx(ee,{exampleMessage:"",helpMessage:"楽器名を選択してください。(複数選択可)",supplementaryMessage:"楽器カテゴリを選択すると、選択肢が表示されます。",title:"経験・興味のある楽器名",statusLabelProps:{children:"任意",type:"grey"},className:"block",children:m.jsx(ue,{gap:{column:1.25,row:.5},children:M.map(r=>m.jsx(ne,{id:`inst_${r.value}`,name:`inst_${r.value}`,checked:Y.some(o=>o.value===r.value),onChange:()=>{const o=X(Y,r);H(o),g("music_inst_ids",o.map(h=>h.value))},children:r.label},r.value))})})]})}),m.jsxs("div",{className:"flex flex-col mx-auto mt-16 md:flex-row w-[160px] md:w-[368px] gap-y-6 md:gap-x-12 pb-16",children:[m.jsx(yt,{href:T,prefix:"",size:"default",suffix:"",variant:"secondary",wide:!0,className:"h-[44px] bg-[var(--color-white)] font-bold text-base/[1] border-[var(--color-text-primary)] hover:bg-[var(--color-primary-bg-hover)] hover:text-[var(--color-primary)] hover:border-[var(--color-primary)]",children:"キャンセル"}),m.jsx(gt,{type:"button",onClick:E,prefix:"",size:"default",suffix:"",variant:"primary",wide:!0,disabled:O,className:"h-[44px] bg-[var(--color-primary)] font-bold text-base/[1] border-[var(--color-primary)] text-[var(--color-white)] hover:bg-[var(--color-primary-hover)] hover:border-[var(--color-primary-hover)]",children:"確認"})]})]})]})}export{us as default};
