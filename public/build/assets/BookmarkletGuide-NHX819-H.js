import{r as t,U as c,j as s,L as W,$ as q}from"./app-D6vcFmdK.js";import{H as J}from"./Header-erZh3ci1.js";import{S as K}from"./Stack-gjzfkU1A.js";import{c as Q,V as N,l as Y,m as Z}from"./DisabledDetail-Dw4L-ws4.js";import{u as z}from"./useDecorators-i0JwH3iv.js";import{B as ee}from"./styled-components.browser.esm-nE3edTgE.js";import"./index-DjOq613E.js";const D=(a,e)=>{let o=null;return function(...u){o!==null&&clearTimeout(o),o=setTimeout(()=>{a(...u)},e)}},C=a=>{const e=typeof a=="number"||typeof a=="string"?`${a}`:Array.isArray(a)?a.join(","):"",o=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;return e.length-(e.match(o)||[]).length},te={beforeMaxLettersCount:"あと",afterMaxLettersCount:"文字",afterMaxLettersCountExceeded:"オーバー",beforeScreenReaderMaxLettersDescription:"最大",afterScreenReaderMaxLettersDescription:"文字入力できます"},re=Q({slots:{textareaEl:["smarthr-ui-Textarea-textarea","shr-border-shorthand shr-my-[unset] shr-box-border shr-rounded-m shr-bg-white shr-p-0.5 shr-text-base shr-leading-normal shr-text-black shr-opacity-100","contrast-more:shr-border-high-contrast","placeholder:shr-text-grey","focus-visible:shr-focus-indicator","disabled:shr-pointer-events-none disabled:shr-bg-column disabled:shr-text-disabled disabled:placeholder:shr-text-disabled","aria-[invalid]:shr-border-danger"],counter:"smarthr-ui-Textarea-counter shr-block shr-text-sm",counterText:"shr-text-black"},variants:{error:{true:{counterText:"shr-text-danger"}}},defaultVariants:{error:!1}}),I=(a,e=Number.MAX_SAFE_INTEGER)=>{if(!a)return 0;const o=Math.floor(a.scrollHeight/(Y*Number(Z.normal)));return o<e?o:e},ae=t.forwardRef(({autoFocus:a,maxLetters:e,width:o,className:u,autoResize:x=!1,maxRows:f=1/0,rows:b=2,onInput:h,decorators:R,error:v,onChange:m,...g},F)=>{const E=t.useId(),M=`${E}-notice`,S=e?E:void 0,i=t.useRef(null),T=g.defaultValue||g.value,[U,y]=t.useState(b),[d,B]=t.useState(T?C(T):0),[H,V]=t.useState(""),l=z(te,R),p=t.useCallback(r=>{if(e!==void 0)return r>e?c.createElement(c.Fragment,null,r-e,l.afterMaxLettersCount,l.afterMaxLettersCountExceeded):c.createElement(c.Fragment,null,l.beforeMaxLettersCount,e-r,l.afterMaxLettersCount)},[e,l.afterMaxLettersCountExceeded,l.afterMaxLettersCount,l.beforeMaxLettersCount]),$=t.useMemo(()=>p(d),[d,p]);t.useImperativeHandle(F,()=>i.current);const k=t.useCallback(D(r=>{t.startTransition(()=>{B(C(r))})},200),[]),j=t.useCallback(D(r=>{t.startTransition(()=>{const n=p(C(r));n&&V(n)})},1e3),[p]),A=t.useCallback(r=>{if(e){const n=r.currentTarget.value;k(n),j(n)}m==null||m(r)},[k,e,m,j]);t.useEffect(()=>{a&&i&&i.current&&i.current.focus()},[a]),t.useEffect(()=>{x&&i.current&&y(I(i.current,f))},[y,f,x]);const L=t.useCallback(r=>{if(r.target.rows=b,x){const n=I(r.target,f);r.target.rows=n,y(n)}h==null||h(r)},[x,f,h,b]),{textareaStyleProps:_,counterStyle:O,counterTextStyle:P}=t.useMemo(()=>{const{textareaEl:r,counter:n,counterText:X}=re();return{textareaStyleProps:{className:r({className:u}),style:{width:typeof o=="number"?`${o}px`:o}},counterStyle:n(),counterTextStyle:X({error:!!(e&&e-d<0)})}},[u,d,e,o]),G=t.useMemo(()=>{const r=e&&d>e;return v||r||void 0},[v,e,d]),w=c.createElement("textarea",{...g,..._,...e&&{"aria-describedby":`${M} ${S}`},"data-smarthr-ui-input":"true",onChange:A,ref:i,"aria-invalid":G||void 0,rows:U,onInput:L});return e?c.createElement("span",null,w,c.createElement("span",{className:O},c.createElement("span",{className:P,id:S,"aria-hidden":!0},$)),c.createElement(N,{"aria-live":"polite"},H),c.createElement(N,{id:M},l.beforeScreenReaderMaxLettersDescription,e,l.afterScreenReaderMaxLettersDescription)):w}),oe=()=>{const[a,e]=t.useState(!1),o=`javascript:(function(){
    const url = encodeURIComponent(window.location.href);
    const title = encodeURIComponent(document.title);
    let popupUrl;
    if ("/" === "/") {
      popupUrl = "http://localhost/favorite/create?title=" + title + "&url=" + url;
    } else {
      popupUrl = "https://snowtapir22.sakura.ne.jp/otosukui/favorite/create?title=" + title + "&url=" + url;
    }
    window.open(popupUrl, "BookmarkWindow", "width=600,height=500");
  })();`,u=async()=>{try{await navigator.clipboard.writeText(o),e(!0),setTimeout(()=>e(!1),2e3)}catch{alert("コピーに失敗しました")}};return s.jsxs(K,{className:"gap-y-4 max-w-3xl",children:[s.jsxs("ol",{className:"list-decimal pl-6 text-sm leading-relaxed",children:[s.jsxs("li",{children:["以下のコードをコピーして、ブラウザのブックマークバーに貼り付けてください。",s.jsx("br",{}),"通常のブックマークと同様に名前をつけることもできます。(例：音すくいリスト追加)"]}),s.jsx("li",{children:"クリックすると開いているページをお気に入りに登録できます。"})]}),s.jsx(ae,{readOnly:!0,value:o,rows:6,className:"font-mono text-xs"}),s.jsx(ee,{onClick:u,variant:"primary",className:"h-[44px] bg-[var(--color-primary)] font-bold text-base/[1] border-[var(--color-primary)] text-[var(--color-white)] hover:bg-[var(--color-primary-hover)] hover:border-[var(--color-primary-hover)]",children:a?"コピーしました！":"コードをコピー"})]})},xe=({authUser:a})=>s.jsxs(s.Fragment,{children:[s.jsx(W,{title:"音すくい | お気に入り追加方法"}),s.jsx(J,{authUser:a}),s.jsxs("main",{className:"pt-[148px] px-4 md:px-8 text-[var(--color-text-primary)] max-w-3xl mx-auto",children:[s.jsx("h2",{className:"font-bold text-3xl text-center mb-8",children:"お気に入り登録用ブックマークレット"}),s.jsx(oe,{}),s.jsx("div",{className:"mt-12 text-center",children:s.jsx(q,{href:"/favorite",className:"text-base font-bold underline text-[var(--color-text)] hover:opacity-80",children:"お気に入り一覧に戻る"})})]})]});export{xe as default};
