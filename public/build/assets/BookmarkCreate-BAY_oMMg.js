import{r as f,j as e}from"./app-Cb8SnxiB.js";import{c as v,T as y}from"./ThemeProvider-C3aW8qrr.js";import{C as w}from"./Center-C8utTiig.js";import{S as g}from"./Stack-DbICIQ2W.js";import{F as n,I as i}from"./Input-BAIJ1s5z.js";import{F as b,C as j}from"./Fieldset-CKdGhJuK.js";import{B as c}from"./Button-BSJ2urlh.js";import"./styled-components.browser.esm-Cvc1yx7v.js";import"./index-CaZsXZEx.js";const U=({authUser:d,initialData:C})=>{const p=v(),l=new URLSearchParams(window.location.search),x=l.get("title")||"お気に入り",h=l.get("url")||"",[r,o]=f.useState({url:h,title:x,comment:"",notify_opt_in:0,notify_at:""}),u=(()=>{const t=document.cookie.match(/XSRF-TOKEN=([^;]+)/);return t?decodeURIComponent(t[1]):null})(),s=async t=>{t.preventDefault();try{const a=await fetch(route("favorite.store"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":u},credentials:"include",body:JSON.stringify(r)});if(a.ok)alert("お気に入り一覧に追加されました"),window.close();else{const m=await a.text();console.error("エラー内容:",m),alert("登録に失敗しました: "+m)}}catch(a){console.error("通信エラー:",a),alert("登録中にエラーが発生しました")}};return e.jsx(y,{theme:p,children:e.jsx(w,{className:" bg-[var(--color-background)] h-screen overflow-y-auto",children:e.jsxs("main",{className:"text-[var(--color-text-primary)] select-none",children:[e.jsx("h2",{className:"font-bold text-3xl text-center mt-16",children:"ブックマーク登録"}),e.jsxs("form",{onSubmit:s,children:[e.jsxs(g,{className:"w-fit mt-8 gap-y-2",children:[e.jsx(n,{title:"URL(リンク)",htmlFor:"url",errorMessages:[],children:e.jsx(i,{id:"url",name:"url",value:r.url,autoComplete:"url",autoFocus:!0,type:"text",required:!0,onChange:t=>o({...r,url:t.target.value}),className:"w-[50vw] md:w-[40vw] min-w-[320px] max-w-[600px] h-[32px] border rounded-md p-2"})}),e.jsx(n,{title:"タイトル",htmlFor:"title",children:e.jsx(i,{id:"title",name:"title",value:r.title,type:"text",onChange:t=>o({...r,title:t.target.value}),className:"w-[50vw] md:w-[40vw] min-w-[320px] max-w-[600px] h-[32px] border rounded-md p-2"})}),e.jsx(n,{title:"メモ",htmlFor:"comment",children:e.jsx(i,{id:"comment",name:"comment",value:r.comment,type:"text",onChange:t=>o({...r,comment:t.target.value}),className:"w-[50vw] md:w-[40vw] min-w-[320px] max-w-[600px] h-24 border rounded-md p-2"})}),d.email_notify_opt_in===1?e.jsxs(e.Fragment,{children:[e.jsx(b,{title:"通知",className:"",children:e.jsx(j,{id:"notify_opt_in",name:"notify_opt_in",checked:r.notify_opt_in===1,onChange:t=>o({...r,notify_opt_in:t.target.checked?1:0}),children:"あり"})}),r.notify_opt_in===1?e.jsx(n,{title:"通知日時",htmlFor:"notify_at",errorMessages:[],children:e.jsx(i,{id:"notify_at",name:"notify_at",value:r.notify_at,type:"datetime-local",onChange:t=>o({...r,notify_at:t.target.value}),className:"h-[32px] border rounded-md p-2"})}):null]}):null]}),e.jsxs("div",{className:"flex flex-col mx-auto mt-16 md:flex-row w-[160px] md:w-[368px] gap-y-6 md:gap-x-12 pb-16",children:[e.jsx(c,{onClick:()=>window.close(),prefix:"",size:"default",suffix:"",variant:"secondary",wide:!0,className:"h-[44px] bg-[var(--color-white)] font-bold text-base/[1] border-[var(--color-text-primary)] hover:bg-[var(--color-primary-bg-hover)] hover:text-[var(--color-primary)] hover:border-[var(--color-primary)]",children:"キャンセル"}),e.jsx(c,{type:"button",onClick:s,prefix:"",size:"default",suffix:"",variant:"primary",wide:!0,className:"h-[44px] bg-[var(--color-primary)] font-bold text-base/[1] border-[var(--color-primary)] text-[var(--color-white)] hover:bg-[var(--color-primary-hover)] hover:border-[var(--color-primary-hover)]",children:"登録"})]})]})]})})})};export{U as default};
