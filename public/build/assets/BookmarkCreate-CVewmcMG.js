import{r as v,j as e}from"./app-C0Rxql0K.js";import{c as y,T as w}from"./ThemeProvider-CqGV6G11.js";import{C as g}from"./Center-DIxlcTOc.js";import{S as b}from"./Stack-CcKdH-PX.js";import{F as i,I as n}from"./Input-BYgT0ITO.js";import{F as j,C as _}from"./Fieldset-DMIiGKjo.js";import{B as d}from"./styled-components.browser.esm-ByCiYivf.js";import"./DisabledDetail-BuqfJXBm.js";import"./index-C-GNVc1O.js";const E=({authUser:x,initialData:C})=>{const p=y(),l=new URLSearchParams(window.location.search),h=l.get("title")||"お気に入り",u=l.get("url")||"",[t,o]=v.useState({url:u,title:h,comment:"",notify_opt_in:0,notify_at:""}),s=async r=>{var m;r.preventDefault();const f=(m=document.querySelector('meta[name="csrf-token"]'))==null?void 0:m.getAttribute("content");try{const a=await fetch("/favorite/store",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":f},credentials:"include",body:JSON.stringify(t)});if(a.ok)alert("お気に入り一覧に追加されました"),window.close();else{const c=await a.text();console.error("エラー内容:",c),alert("登録に失敗しました: "+c)}}catch(a){console.error("通信エラー:",a),alert("登録中にエラーが発生しました")}};return e.jsx(w,{theme:p,children:e.jsx(g,{className:" bg-[var(--color-background)] h-screen overflow-y-auto",children:e.jsxs("main",{className:"text-[var(--color-text-primary)] select-none",children:[e.jsx("h2",{className:"font-bold text-3xl text-center mt-16",children:"ブックマーク登録"}),e.jsxs("form",{onSubmit:s,children:[e.jsxs(b,{className:"w-fit mt-8 gap-y-2",children:[e.jsx(i,{title:"URL(リンク)",htmlFor:"url",errorMessages:[],children:e.jsx(n,{id:"url",name:"url",value:t.url,autoComplete:"url",autoFocus:!0,type:"text",required:!0,onChange:r=>o({...t,url:r.target.value}),className:"w-[50vw] md:w-[40vw] min-w-[320px] max-w-[600px] h-[32px] border rounded-md p-2"})}),e.jsx(i,{title:"タイトル",htmlFor:"title",children:e.jsx(n,{id:"title",name:"title",value:t.title,type:"text",onChange:r=>o({...t,title:r.target.value}),className:"w-[50vw] md:w-[40vw] min-w-[320px] max-w-[600px] h-[32px] border rounded-md p-2"})}),e.jsx(i,{title:"メモ",htmlFor:"comment",children:e.jsx(n,{id:"comment",name:"comment",value:t.comment,type:"text",onChange:r=>o({...t,comment:r.target.value}),className:"w-[50vw] md:w-[40vw] min-w-[320px] max-w-[600px] h-24 border rounded-md p-2"})}),x.email_notify_opt_in===1?e.jsxs(e.Fragment,{children:[e.jsx(j,{title:"通知",className:"",children:e.jsx(_,{id:"notify_opt_in",name:"notify_opt_in",checked:t.notify_opt_in===1,onChange:r=>o({...t,notify_opt_in:r.target.checked?1:0}),children:"あり"})}),t.notify_opt_in===1?e.jsx(i,{title:"通知日時",htmlFor:"notify_at",errorMessages:[],children:e.jsx(n,{id:"notify_at",name:"notify_at",value:t.notify_at,type:"datetime-local",onChange:r=>o({...t,notify_at:r.target.value}),className:"h-[32px] border rounded-md p-2"})}):null]}):null]}),e.jsxs("div",{className:"flex flex-col mx-auto mt-16 md:flex-row w-[160px] md:w-[368px] gap-y-6 md:gap-x-12 pb-16",children:[e.jsx(d,{onClick:()=>window.close(),prefix:"",size:"default",suffix:"",variant:"secondary",wide:!0,className:"h-[44px] bg-[var(--color-white)] font-bold text-base/[1] border-[var(--color-text-primary)] hover:bg-[var(--color-primary-bg-hover)] hover:text-[var(--color-primary)] hover:border-[var(--color-primary)]",children:"キャンセル"}),e.jsx(d,{type:"button",onClick:s,prefix:"",size:"default",suffix:"",variant:"primary",wide:!0,className:"h-[44px] bg-[var(--color-primary)] font-bold text-base/[1] border-[var(--color-primary)] text-[var(--color-white)] hover:bg-[var(--color-primary-hover)] hover:border-[var(--color-primary-hover)]",children:"登録"})]})]})]})})})};export{E as default};
